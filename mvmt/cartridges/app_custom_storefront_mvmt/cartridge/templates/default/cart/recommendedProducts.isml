<iscomment> Custom: Start new template added for recommendation products </iscomment>
<isset name="isEswProductRestrictionsEnabled" value="${!empty(dw.system.Site.current.preferences.custom.eswProductRestrictionsEnabled) ? dw.system.Site.current.preferences.custom.eswProductRestrictionsEnabled : false}" scope="page" />
<div class="mini-cart-product-list">
    <isif condition="${!empty(pdict.explicitRecommendations) && pdict.explicitRecommendations.length > 0}">
        <button class="mini-cart-show-recommendations" id="btn-${pdict.pid}">${Resource.msg('label.minicart.recommendatation.text', 'cart', null)}</button>
        <button class="mini-cart-hide-recommendations d-none" >${Resource.msg('label.minicart.hide.recommendatation.text', 'cart', null)}</button>
        <div class="mini-cart-recommendations d-none">
            <isloop items="${pdict.explicitRecommendations}" var="recommendation">
                <isif condition="${recommendation != null}">
                    <div class="upsell-wrapper">
                        <div class="upsell-wrapper-inner">
                        <span class="upsell-collection">${!empty(recommendation.defaultVariantCollectionName) ? recommendation.defaultVariantCollectionName : recommendation.collectionName}</span>
                            <img class="upsell-image" src="${recommendation.images.tile150[0].url}"/>
                            
                            <p class="upsell-description">${recommendation.productName}</p>
                            <div class="upsell_meta">
                                <div class="upsell-price">
                                    <isset name="price" value="${recommendation.price}" scope="page" />
                                    <isif condition="${recommendation.productType === 'set'}">
                                        <isinclude template="product/components/pricing/setPrice" />
                                    <iselse>
                                        <isinclude template="product/components/pricing/main" />
                                    </isif>
                                </div>
                            </div>
                        </div>
                        <isif condition="${isEswProductRestrictionsEnabled && recommendation.isProductNotRestrictedOnEswCountries && !recommendation.isCurrentDomesticAllowedCountry}">
                            <div>
                                <isprint value="${recommendation.eswNotRestrictedCountriesProductMsgBody}" encoding="off" />
                            </div>
                        <iselse/>
                            <button class="mini-cart-add-to-cart btn " data-pid="${recommendation.id}" data-url="${URLUtils.url('Cart-AddProduct')}">${Resource.msg('label.add-to-cart', 'cart', null)}</button>
                        </isif>
                    </div>
                </isif>
            </isloop>
        </div>
    </isif>
</div>
<iscomment> Custom: End </iscomment>
